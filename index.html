<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>我们的婚礼请柬 | Our Wedding Invitation</title>
  <meta name="description" content="网页电子请柬 – 时间、地点、RSVP、相册、地图导航" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">

  <style>
    :root{
      --bg:#f5f1eb; --card:#fff; --fg:#1a1a1a; --muted:#6f7278;
      --brand:#2f4f4f; --brand-2:#b08a68; /* 香槟色 */
      --radius:22px; --shadow:0 12px 36px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    html{font-size:16px}
    @media (max-width:480px){html{font-size:15.5px}}
    body{
      margin:0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,
        "Noto Sans SC","PingFang SC","Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;
      line-height:1.7; color:var(--fg);
      background:var(--bg); /* 背景色兜底 */
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body.modal-open{overflow:hidden}

    /* ===== 背景 MV（全屏铺底） ===== */
    .bgmv-wrap{
      position:fixed; inset:0; z-index:-2; overflow:hidden; background:#000;
    }
    .bgmv{
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
      min-width:100vw; min-height:100vh; width:auto; height:auto; object-fit:cover;
      filter:brightness(.86) saturate(1.02);
    }
    /* 轻雾层，提升前景对比度 */
    .bg-scrim{
      position:fixed; inset:0; z-index:-1;
      background:radial-gradient(1200px 600px at 50% 18%, rgba(0,0,0,.18), rgba(0,0,0,.48));
      pointer-events:none;
    }

    /* === 全站标题：香槟色粗体（在复杂背景上更清晰）=== */
    h1,h2,h3{
      margin:0 0 16px; line-height:1.3;
      font-weight:800;
      color:var(--brand-2);
      text-shadow:0 1px 1px rgba(0,0,0,.15);
    }
    p{margin:0 0 0.8em}
    small,.muted{color:var(--muted)}
    .title-serif{
      font-family: "Noto Serif SC","Songti SC","STSong","Source Han Serif SC",
        "Hiragino Mincho ProN","Yu Mincho","SimSun",Georgia,"Times New Roman",serif;
      letter-spacing:.02em
    }

    .container{max-width:1040px;margin:0 auto;padding:24px}
    section{padding:48px 0}
    .btn{display:inline-block;padding:12px 20px;border-radius:999px;background:var(--brand);color:#fff;text-decoration:none;font-weight:600;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,.06)}
    .btn:hover{filter:brightness(0.96)}
    .btn.ghost{background:#fff;color:var(--brand);border:1px solid rgba(0,0,0,.14)}
    .card{
      background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);
      /* D：细金边（默认主题） */
      border:1px solid rgba(217,177,108,.22);
    }
    .grid{display:grid;gap:20px}
    .center{text-align:center}

    .ornament{
      height:26px;margin:12px auto 6px;max-width:320px;
      background:center/contain no-repeat url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="420" height="26" viewBox="0 0 420 26"><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="0"><stop stop-color="%23b08a68"/><stop offset="1" stop-color="%238f7355"/></linearGradient></defs><path d="M10 13 H170" stroke="url(%23g)" stroke-width="2" stroke-linecap="round" fill="none"/><path d="M250 13 H410" stroke="url(%23g)" stroke-width="2" stroke-linecap="round" fill="none"/><path d="M210 10c0-6 10-9 10 0 0-9 10-6 10 0 0 8-10 10-10 10s-10-2-10-10z" fill="url(%23g)"/></svg>');
    }

    /* === HERO：保留 time1.jpg 覆盖图 === */
    .hero{position:relative;overflow:hidden;border-radius:calc(var(--radius)*1.2)}
    .hero .cover{
      position:absolute;inset:0;
      background:
        linear-gradient(180deg, rgba(47,79,79,.35), rgba(47,79,79,.55)),
        url('images/time1.jpg') center/cover no-repeat;
    }
    .hero .inner{position:relative;z-index:1;color:#fff;padding:100px 28px;text-align:center}
    /* 把从 “W E D D I N G” 开始的整段再下移两行 */
    .hero .inner .kicker{ margin-top:2.2em; }
    @media (max-width:720px){
      .hero .inner{padding:80px 22px}
      .hero .inner .kicker{ margin-top:2.6em; }
    }
    .couple{font-size:2.75rem;line-height:1.1;font-weight:700}
    .and{font-weight:400;opacity:.9;margin:0 8px}
    .dateplace{margin-top:10px;font-size:1rem;letter-spacing:.04em}
    .scroll-down{margin-top:22px;display:inline-block;font-size:.9rem;opacity:.9;color:#fff;text-decoration:none}

    .countdown{display:flex;justify-content:center;gap:14px;margin-top:18px}
    .dd{
      min-width:78px;padding:12px 10px;border-radius:14px;
      background:rgba(0,0,0,.35);
      backdrop-filter:blur(4px); color:#fff;
    }
    .dd strong{display:block;font-size:1.4rem}

    .schedule{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .schedule .item{padding:18px}
    .schedule .item h3{font-size:1.05rem;margin-bottom:6px}

    /* Gallery */
    .gallery{grid-template-columns:1fr;justify-items:center}
    .gallery img{
      display:block;width:auto;height:auto;max-width:min(100%, 900px);max-height:70vh;object-fit:contain;border-radius:14px;
    }
    @media (max-width:720px){
      .gallery img{max-width:92vw;max-height:60vh}
    }

    .rsvp{display:grid;grid-template-columns:1.2fr .8fr;gap:24px}
    .rsvp-embed{width:100%;height:560px;border:0;border-radius:12px;box-shadow:var(--shadow);background:#fff}
    .rsvp-actions{display:flex;gap:10px;flex-wrap:wrap}
    .rsvp-actions .btn{flex:1;min-width:220px;text-align:center}

    .map-card{display:grid;grid-template-columns:1fr 1fr;gap:22px;padding:18px}
    .map{aspect-ratio:16/10;border:0;width:100%;border-radius:12px;min-height:300px}
    .map-actions{display:flex;flex-direction:column;gap:10px}
    .map-actions .btn{width:100%;text-align:center;font-size:14px;padding:10px 14px}
    /* 让括号说明换行成“第二行” */
    .btn .subline{display:block;font-size:12px;line-height:1.2;opacity:.9;margin-top:2px}
    @media (max-width:480px){ .map-actions .btn{font-size:13px;padding:9px 12px} }

    /* Tips */
    #tips ul{margin:6px 0 8px 0; padding-left:.7em; list-style:disc; list-style-position:inside; text-align:left; font-size:12.5px; line-height:1.5;}
    #tips li{ margin:3px 0; }
    @media (max-width:480px){ #tips ul{ font-size:12px; line-height:1.45; padding-left:.5em; } }

    /* 模态弹窗 */
    .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.45); z-index:10000; padding:20px; overscroll-behavior:contain;}
    .modal .panel{width:92vw; max-width:720px; max-height:80vh; background:#fff; border-radius:18px; box-shadow:var(--shadow); overflow:hidden; display:flex; flex-direction:column;}
    .modal header{position:sticky; top:0; z-index:1; padding:14px 16px; background:linear-gradient(90deg,#f6efe6,#f9f5ef); border-bottom:1px solid #eee; display:flex; align-items:center; justify-content:space-between; flex:0 0 auto;}
    .modal h3{margin:0;font-size:1.1rem}
    .modal .close{appearance:none;border:0;background:transparent;font-size:22px;cursor:pointer;line-height:1;padding:6px}
    .modal .content{padding:14px 16px; overflow:auto; -webkit-overflow-scrolling:touch; flex:1 1 auto;}
    .menu-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px 20px}
    .menu-grid li{padding:6px 0;border-bottom:1px dashed #eee}
    .menu-subtitle{margin:6px 0 4px;font-weight:700;color:#8f7355}
    @media (max-width:720px){
      .rsvp{grid-template-columns:1fr}
      .couple{font-size:2.25rem}
      .hero .inner{padding:80px 22px}
      .hero .inner .kicker{ margin-top:2.6em; }
      .rsvp-embed{height:600px}
      .menu-grid{grid-template-columns:1fr}
      .modal .panel{width:94vw; max-height:85vh; border-radius:16px}
      .modal .content{padding:12px 14px}
    }

    /* 右下角：控制 MV 静音/开声 */
    .music-fab{
      position:fixed; right:16px; bottom:16px; z-index:9999;
      width:54px; height:54px; border-radius:999px;
      display:flex; align-items:center; justify-content:center;
      background:var(--brand); color:#fff; box-shadow:var(--shadow);
      border:1px solid rgba(0,0,0,.08); cursor:pointer;
    }
    .music-fab svg{width:24px;height:24px;display:block}
    .music-fab .muted-icon{display:none}
    .music-fab.is-muted .muted-icon{display:block}
    .music-fab.is-muted .play-icon{display:none}
    .music-fab:focus-visible{outline:3px solid rgba(176,138,104,.6); outline-offset:2px}

    .toast{position:fixed; left:50%; bottom:84px; transform:translateX(-50%); background:rgba(0,0,0,.76); color:#fff; padding:10px 14px; border-radius:999px; font-size:13px; z-index:9999; display:none;}

    /* ===== 滚动渐入 ===== */
    .reveal{opacity:0; transform:translateY(16px); transition:opacity .7s ease, transform .7s ease}
    .reveal.in{opacity:1; transform:none}

    /* ========= 方案一：红金主题（可选） ========= */
    :root[data-theme="red"]{
      --bg:#fff8f4;
      --card:#ffffff;
      --fg:#1a1a1a;
      --muted:#7b7e85;
      --brand:#8a1111;     /* 主红（按钮等） */
      --brand-2:#d9b16c;   /* 标题金色 */
      --ring:#c41d1d;
      --gold:#d8b77f;
    }
    :root[data-theme="red"] .card{
      border:1px solid rgba(196,29,29,.12);
      box-shadow:0 12px 36px rgba(138,17,17,.06);
    }
    :root[data-theme="red"] .btn{
      background:var(--brand);
      border-color:rgba(0,0,0,.06);
    }
    :root[data-theme="red"] .btn:hover{
      filter:none; transform:translateY(-1px);
      box-shadow:0 10px 24px rgba(138,17,17,.18);
    }
    :root[data-theme="red"] .btn.ghost{
      background:#fff; color:var(--brand); border:1px solid rgba(196,29,29,.25);
    }
    /* 方案二：红金 ornament（随红金主题自动切换） */
    :root[data-theme="red"] .ornament{
      background:center/contain no-repeat
        url('data:image/svg+xml;utf8,<?xml version="1.0" encoding="UTF-8"?>\
<svg xmlns="http://www.w3.org/2000/svg" width="420" height="26" viewBox="0 0 420 26">\
  <defs>\
    <linearGradient id="g" x1="0" x2="1" y1="0" y2="0">\
      <stop stop-color="%23c41d1d"/><stop offset="1" stop-color="%23d9b16c"/>\
    </linearGradient>\
  </defs>\
  <path d="M10 13 H170" stroke="url(%23g)" stroke-width="2" stroke-linecap="round" fill="none"/>\
  <path d="M250 13 H410" stroke="url(%23g)" stroke-width="2" stroke-linecap="round" fill="none"/>\
  <path d="M210 10c0-6 10-9 10 0 0-9 10-6 10 0 0 8-10 10-10 10s-10-2-10-10z" fill="url(%23g)"/>\
</svg>');
    }

    /* === 方案三：右上角自动旋转红色爱心角标 === */
    .corner-heart{
      position:absolute; right:14px; top:14px; z-index:2;
      width:66px; height:66px; display:grid; place-items:center;
      border-radius:50%;
      background: radial-gradient(circle at 70% 30%, rgba(255,255,255,.18), rgba(255,255,255,0) 60%);
      filter: drop-shadow(0 8px 18px rgba(181,18,18,.28));
      animation: spin 12s linear infinite;
    }
    .corner-heart svg{
      width:44px; height:44px;
      fill:#d81d1d;
      stroke:#ffdddd; stroke-width:.8px;
      filter: drop-shadow(0 1px 2px rgba(0,0,0,.25));
    }
    @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
    @media (prefers-reduced-motion: reduce){ .corner-heart{ animation:none; } }

    /* === A：花瓣雨 === */
    .petals{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:5000; }
    .petal{ position:absolute; top:-12vh; left:var(--l); animation:fall var(--dur) linear var(--delay) infinite; }
    .petal > span{
      display:block; width:14px; height:12px;
      background: radial-gradient(35% 45% at 30% 30%, #ffd1dc, #ff9bb2 60%, #e64a6a 100%);
      border-radius:60% 40% 60% 40% / 60% 60% 40% 40%;
      opacity:.85; filter:blur(.2px); transform-origin:50% 60%;
      animation: sway calc(var(--dur)*.9) ease-in-out var(--delay) infinite alternate,
                 spin calc(var(--dur)*.6) linear var(--delay) infinite;
    }
    @keyframes fall{ to{ transform: translateY(120vh); } }
    @keyframes sway{ from{ transform: translateX(-14px) rotate(-12deg);} to{ transform: translateX(14px) rotate(12deg);} }
    @media (prefers-reduced-motion: reduce){ .petals{ display:none; } }

    /* === B：金箔流光姓名（应用在 .couple 上） === */
    .gold-shimmer{
      color:transparent;
      background-image:
        linear-gradient(100deg, #b08a68 0%, #f3e6c3 22%, #b08a68 45%, #d9b16c 60%, #b08a68 80%);
      background-size:200% 100%;
      -webkit-background-clip:text;
      background-clip:text;
      animation: shimmer 6s linear infinite;
      text-shadow: 0 2px 6px rgba(0,0,0,.25);
    }
    @keyframes shimmer{ to{ background-position: -200% 0; } }
    @media (prefers-reduced-motion: reduce){ .gold-shimmer{ animation:none; } }

    /* === C：红缎带分隔线（用于章节之间） === */
    .ribbon-sep{
      height:14px; border-radius:999px; margin:28px auto;
      max-width:760px;
      background:
        linear-gradient(90deg,#8a1111 0%, #c41d1d 40%, #e3474a 50%, #c41d1d 60%, #8a1111 100%);
      box-shadow:
        0 6px 14px rgba(138,17,17,.18),
        inset 0 1px 0 rgba(255,255,255,.35),
        inset 0 -1px 0 rgba(0,0,0,.06);
      position:relative;
    }
    .ribbon-sep::after{
      content:''; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:22px; height:22px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), #d9b16c 55%, #8a1111 85%);
      box-shadow: 0 2px 6px rgba(0,0,0,.2);
    }

    /* === 让邀请文案与底部在暗背景上更醒目 === */
    .invite{color:#fff; text-shadow:0 1px 3px rgba(0,0,0,.5); margin:.25em 0;}
    footer{color:#fff; text-shadow:0 1px 3px rgba(0,0,0,.5)}
    footer .muted{color:rgba(255,255,255,.9)}
  </style>

  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>
</head>
<body>
  <!-- 若要启用红金主题，把 body 改成：<body data-theme="red"> -->

  <!-- 背景 MV -->
  <div class="bgmv-wrap" aria-hidden="true">
    <video id="bgmv" class="bgmv"
      src="images/BgLoad.mp4"
      autoplay muted loop playsinline webkit-playsinline x5-playsinline preload="auto" poster="">
    </video>
  </div>
  <div class="bg-scrim" aria-hidden="true"></div>

  <!-- 花瓣雨（A，可选装饰） -->
  <div class="petals" aria-hidden="true"></div>

  <div class="container">
    <!-- HERO（保留 card 外观 + 覆盖图 time1.jpg） -->
    <section class="hero card reveal" id="home">

      <!-- 右上角：自动旋转红色爱心（已加入） -->
      <div class="corner-heart" aria-hidden="true" title="Love">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 21s-6.6-4.2-9.4-7C1.2 12.6.7 9.8 2.3 8.2c1.3-1.3 3.5-1.3 4.8 0L12 13l4.9-4.8c1.3-1.3 3.5-1.3 4.8 0 1.6 1.6 1.1 4.4-.3 5.8-2.8 2.8-9.4 7-9.4 7z"/>
        </svg>
      </div>

      <div class="cover" aria-hidden="true"></div>
      <div class="inner">
        <div class="title-serif kicker" style="font-size:14px;opacity:.9;letter-spacing:.14em;color:#fff">W E D D I N G</div>
        <!-- B：给姓名加上金箔流光 -->
        <h1 class="couple title-serif gold-shimmer">宋禹洲 <span class="and">&</span> 骆沙</h1>
        <div class="ornament" aria-hidden="true"></div>
        <div class="dateplace">
          <span class="date">2025年10月19日 上午10:58</span><br>
          <span class="place">吉林省长春市 香格里拉酒店</span>
        </div>

        <div class="countdown" role="timer" aria-live="polite">
          <div class="dd"><strong id="dday">--</strong><span>天</span></div>
          <div class="dd"><strong id="dh">--</strong><span>小时</span></div>
          <div class="dd"><strong id="dm">--</strong><span>分钟</span></div>
          <div class="dd"><strong id="ds">--</strong><span>秒</span></div>
        </div>

        <a class="scroll-down" href="#rsvp">↓ 立即回复 RSVP</a>
      </div>
    </section>

    <!-- C：红缎带分隔线（章节装饰） -->
    <div class="ribbon-sep reveal" aria-hidden="true"></div>

    <!-- 简短寄语（英中分两行，并提亮颜色） -->
    <section class="center reveal">
      <p class="invite">We joyfully invite you to celebrate our wedding.</p>
      <p class="invite">期待与您共享这一刻。</p>
      <a href="#details" class="btn">查看详细信息</a>
    </section>

    <!-- 日程 -->
    <section id="details" class="reveal">
      <h2 class="title-serif center">婚礼日程 · Schedule</h2>
      <div class="grid schedule" style="margin-top:18px">
        <div class="item card"><h3>宾客入场</h3><div class="muted">10:45 前 · 香格里拉酒店</div><p>请宾客提前入场就座</p></div>
        <div class="item card"><h3>典礼 / 午宴</h3><div class="muted">10:58 – 14:00 · 宴会厅</div><p>典礼进行、午宴时间</p></div>
      </div>
      <div class="center" style="margin-top:18px">
        <button id="menuBtn" class="btn ghost">午宴菜单</button>
      </div>
    </section>

    <!-- 相册 -->
    <section id="gallery" class="reveal">
      <h2 class="title-serif center">Gallery</h2>
      <div class="grid gallery" style="margin-top:18px">
        <img src="images/p1.jpg" alt="Photo 1" loading="lazy">
      </div>
    </section>

    <!-- 再加一条红缎带分隔线 -->
    <div class="ribbon-sep reveal" aria-hidden="true"></div>

    <!-- RSVP + Tips -->
    <section id="rsvp" class="reveal">
      <h2 class="title-serif center">宾客回执 · RSVP</h2>
      <div class="rsvp" style="margin-top:18px">
        <div class="card" style="padding:18px">
          <h3 class="title-serif" style="margin-bottom:10px">请填写您的出席信息</h3>
          <iframe
            class="rsvp-embed"
            src="https://dcnimb97gm62.feishu.cn/share/base/form/shrcnaupBRrI3UN4xHtHOBKKqVg"
            title="Wedding RSVP 表单"
            allow="clipboard-write"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
          <div class="rsvp-actions" style="margin-top:12px">
            <a class="btn" target="_blank" rel="noopener" href="https://dcnimb97gm62.feishu.cn/share/base/form/shrcnaupBRrI3UN4xHtHOBKKqVg">在飞书中打开</a>
            <span class="btn subline" aria-hidden="true">（推荐）</span>
          </div>
          <p class="muted" style="margin-top:10px;font-size:13px">如遇加载问题，请点击“在飞书中打开”。</p>
        </div>

        <div class="card" style="padding:18px" id="tips">
          <h3 class="title-serif" style="margin-bottom:10px">Tips</h3>
          <ul>
            <li>婚礼主题为香槟色，请宾客根据现场主题合理自行搭配穿搭。</li>
            <li>由于酒店未提供菜单所涉及食物与酒水的过敏原说明，请宾客根据自身过敏原，避免摄入会造成过敏的食物。</li>
            <li>酒店内停车场车满后请移步香格里拉酒店对面万达广场。</li>
            <li>礼金可现场递交给男女方或其直系亲属，或扫码转账。</li>
          </ul>
          <a class="btn" href="#map">查看地图与导航</a>
        </div>
      </div>
    </section>

    <!-- 地点与交通 -->
    <section id="map" class="reveal">
      <h2 class="title-serif center">地点与交通 · Venue</h2>
      <div class="card map-card" style="margin-top:18px">
        <div>
          <!-- 1) 城市与酒店分两行 -->
          <h3>吉林省长春市<br>香格里拉酒店</h3>
          <div class="muted">吉林省长春市西安大路569号（人民广场附近）</div>
          <p style="margin-top:10px">建议乘坐地铁1号线至人民广场站，步行约5-8分钟；或打车直达酒店门口。</p>
          <div class="map-actions">
            <!-- 2) 确保链接各自跳转，括号说明放第二行 -->
            <a class="btn" target="_blank" rel="noopener"
               href="https://uri.amap.com/marker?position=125.312401,43.892416&name=%E9%95%BF%E6%98%A5%E9%A6%99%E6%A0%BC%E9%87%8C%E6%8B%89%E9%85%92%E5%BA%97">
              <span>高德地图</span><span class="subline">（国内推荐）</span>
            </a>
            <a class="btn" target="_blank" rel="noopener"
               href="https://www.google.com/maps?q=43.892416,125.312401">
              <span>Google 地图</span><span class="subline">（国外推荐）</span>
            </a>
          </div>
        </div>
        <div id="leaflet-map" class="map"></div>
      </div>
    </section>

    <footer class="center reveal">
      <!-- 4) 底部文案提亮，样式在上方 footer 中已覆盖 -->
      <div>感谢见证我们的幸福时刻 · With love, Yuzhou & Sha</div>
      <div style="margin-top:6px" class="muted">© <span id="year"></span> Our Wedding</div>
    </footer>
  </div>

  <!-- 右下角：控制 MV 静音/开声 -->
  <button id="musicFab" class="music-fab is-muted" aria-label="开启音乐" title="开启音乐">
    <svg class="play-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M9 18a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill="currentColor" opacity=".9"/>
      <path d="M13 5v9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M13 5l7-2v9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M18.5 14.5c1 .8 1.5 1.6 1.5 2.5s-.5 1.7-1.5 2.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".9"/>
    </svg>
    <svg class="muted-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M4 10h3l5-4v12l-5-4H4z" fill="currentColor" />
      <path d="M16 9l5 5M21 9l-5 5" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- 午宴菜单模态弹窗 -->
  <div id="menuModal" class="modal" aria-hidden="true" aria-modal="true" role="dialog" aria-labelledby="menuTitle">
    <div class="panel">
      <header>
        <h3 id="menuTitle" class="title-serif">午宴菜单 · 香格里拉</h3>
        <button class="close" aria-label="关闭" id="menuClose">×</button>
      </header>
      <div class="content">
        <div class="menu-subtitle">吉庆六彩碟</div>
        <ul class="menu-grid">
          <li>泡椒藕芽</li><li>冰糖蜜枣</li><li>虫草花脆笋</li>
          <li>香醋海蜇</li><li>红油凤爪</li><li>松仁小肚</li>
        </ul>

        <div class="menu-subtitle">热菜 & 主食</div>
        <ul class="menu-grid">
          <li>满堂喜庆 · 广式烧味大拼盘</li>
          <li>如意吉祥 · 金枕玉饺焗大龙虾</li>
          <li>宏图大展 · 姜香海参烧花胶</li>
          <li>富贵有余 · 鲜露葱油虎石斑鱼</li>
          <li>喜结连理 · 金蒜银丝蒸鲍鱼</li>
          <li>幸福美满 · 蒜片菌香谷饲牛肉</li>
          <li>浓情蜜意 · 竹笙瑶柱海皇羹</li>
          <li>金鸡报喜 · 精选飘香清远鸡</li>
          <li>满掌元宝 · 翡翠东坡状元肘</li>
          <li>金枝玉叶 · 锦绣蛋丝四喜丸</li>
          <li>吉祥芙蓉 · 香菇扒供港芥兰</li>
          <li>心心相印 · 鲜虾黄金香炒饭</li>
          <li>百年好合 · 红糖爆浆脆糍粑</li>
          <li>锦上添花 · 满盘佳果水果拼</li>
        </ul>
        <p class="muted" style="margin-top:8px">* 菜名仅供参考。</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function(){
      // ===== 倒计时 =====
      const targetUTC = new Date(Date.UTC(2025, 9, 19, 2, 58, 0));
      const dEl = document.getElementById('dday'),
            hEl = document.getElementById('dh'),
            mEl = document.getElementById('dm'),
            sEl = document.getElementById('ds');
      function renderCountdown(){
        const now = new Date();
        let diff = Math.max(0, targetUTC.getTime() - now.getTime());
        const d = Math.floor(diff / 86400000); diff -= d*86400000;
        const h = Math.floor(diff / 3600000);  diff -= h*3600000;
        const m = Math.floor(diff / 60000);    diff -= m*60000;
        const s = Math.floor(diff / 1000);
        dEl.textContent = String(d).padStart(2,'0');
        hEl.textContent = String(h).padStart(2,'0');
        mEl.textContent = String(m).padStart(2,'0');
        sEl.textContent = String(s).padStart(2,'0');
      }
      renderCountdown(); setInterval(renderCountdown, 1000);

      // 年份
      const y = document.getElementById('year'); if(y) y.textContent = new Date().getFullYear();

      // ===== 背景 MV 声音按钮（单按钮：开声/静音；自动播放保持不变）=====
      const video = document.getElementById('bgmv');
      const fab   = document.getElementById('musicFab');
      const toast = document.getElementById('toast');
      const KEY = 'mv_sound_on';

      function showToast(msg){toast.textContent=msg;toast.style.display='block';setTimeout(()=>toast.style.display='none',1600)}
      function updateFab(){
        if(video.muted || video.volume===0 || video.paused){
          fab.classList.add('is-muted'); fab.setAttribute('aria-label','开启音乐'); fab.title='开启音乐';
        }else{
          fab.classList.remove('is-muted'); fab.setAttribute('aria-label','静音'); fab.title='静音';
        }
      }
      async function fadeTo(targetVol=1, ms=600){
        const steps=20,dt=ms/steps,start=video.volume;
        for(let i=1;i<=steps;i++){video.volume=start+(targetVol-start)*i/steps;await new Promise(r=>setTimeout(r,dt));}
      }

      // 初始：静音自动播（兼容移动端/微信）
      video.muted = true; video.volume = 1;
      // 若用户曾开过声，首次交互自动淡入开声
      if(localStorage.getItem(KEY)==='on'){
        const first=async()=>{ try{ await video.play(); video.muted=false; video.volume=0; await fadeTo(1,700); }catch(e){}; updateFab(); remove(); }
        const remove=()=>['touchstart','click','keydown'].forEach(t=>window.removeEventListener(t,first,true))
        ;['touchstart','click','keydown'].forEach(t=>window.addEventListener(t,first,true))
      }
      updateFab();

      fab.addEventListener('click', async ()=>{
        try{
          if(video.paused){ await video.play(); }
          if(video.muted || video.volume===0){
            video.muted=false; video.volume=0; await fadeTo(1,600); localStorage.setItem(KEY,'on');
          }else{
            video.muted=true; localStorage.setItem(KEY,'off');
          }
          updateFab();
        }catch(e){ showToast('若无声，请先触摸屏幕后再点此'); }
      });
      fab.addEventListener('keydown', e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();fab.click();}});

      // ===== 地图 =====
      const el = document.getElementById('leaflet-map');
      if(el){
        const lat = 43.892416, lng = 125.312401;
        const map = L.map(el, { scrollWheelZoom:false }).setView([lat, lng], 16);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom:19, attribution:'© OSM contributors' }).addTo(map);
        L.marker([lat, lng]).addTo(map).bindPopup('吉林省长春市 香格里拉酒店<br/>西安大路569号（人民广场附近）').openPopup();
      }

      // ===== 菜单模态 =====
      const menuBtn = document.getElementById('menuBtn');
      const menuModal = document.getElementById('menuModal');
      const menuClose = document.getElementById('menuClose');
      function openMenu(){menuModal.style.display='grid';menuModal.setAttribute('aria-hidden','false');document.body.classList.add('modal-open');}
      function closeMenu(){menuModal.style.display='none';menuModal.setAttribute('aria-hidden','true');document.body.classList.remove('modal-open');}
      menuBtn.addEventListener('click', openMenu);
      menuClose.addEventListener('click', closeMenu);
      menuModal.addEventListener('click', (e)=>{ if(e.target===menuModal) closeMenu(); });
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });

      // ===== 滚动渐入 =====
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target); }
        });
      },{threshold:.12});
      document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

      // ===== A：生成少量花瓣（轻量）=====
      const petalsBox = document.querySelector('.petals');
      if (petalsBox){
        const N = 18; // 数量可调：10~24 建议
        for(let i=0;i<N;i++){
          const d = document.createElement('div');
          d.className = 'petal';
          d.style.setProperty('--l', Math.random()*100 + 'vw');
          d.style.setProperty('--dur', (9 + Math.random()*6) + 's');
          d.style.setProperty('--delay', (-Math.random()*9) + 's');
          const s = document.createElement('span');
          d.appendChild(s);
          petalsBox.appendChild(d);
        }
      }
    });
  </script>
</body>
</html>
